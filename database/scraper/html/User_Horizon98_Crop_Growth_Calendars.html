<div class="mw-body-content" id="bodyContent">
<div class="noprint" id="siteSub">From Stardew Valley Wiki</div>
<div id="contentSub"><span class="subpages">&lt; <a href="/User:Horizon98" title="User:Horizon98">User:Horizon98</a></span></div>
<div id="contentSub2"></div>
<div id="jump-to-nav"></div>
<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
<a class="mw-jump-link" href="#searchInput">Jump to search</a>
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><div class="mw-highlight mw-highlight-lang-lua mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">local</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">local</span> <span class="n">private</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1">----------main function----------</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">calendar</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
  <span class="c1">-- input args</span>
  <span class="kd">local</span> <span class="n">name</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">size</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'size'</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">36</span>
  <span class="kd">local</span> <span class="n">speedIncrease</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'increase'</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span>
  <span class="kd">local</span> <span class="n">season</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'season'</span><span class="p">]</span> <span class="ow">or</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">irrigation</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'irrigation'</span><span class="p">]</span> <span class="ow">or</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">stageImage</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'image1'</span><span class="p">]</span> <span class="ow">or</span> <span class="n">name</span><span class="o">..</span><span class="s1">' Stage'</span>
  <span class="kd">local</span> <span class="n">cropImage</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'image2'</span><span class="p">]</span> <span class="ow">or</span> <span class="n">name</span>
  
  <span class="kd">local</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'mode'</span><span class="p">]</span> <span class="ow">or</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">title</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="ow">or</span> <span class="kc">nil</span>
  
<span class="c1">----------Dictionary----------</span>
  <span class="n">Dictionary</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="s1">'speedGro'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Speed-Gro'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'deluxeSpeedGro'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Deluxe Speed-Gro'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'hyperSpeedGro'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Hyper Speed-Gro'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'agriculturist'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Agriculturist'</span><span class="p">,</span>
    
    <span class="p">[</span><span class="s1">'monday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Mon'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'tuesday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Tue'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'wednesday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Wed'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'thursday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Thu'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'friday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Fri'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'saturday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Sat'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'sunday'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Sun'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'spring'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Spring'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'summer'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Summer'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'fall'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Fall'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'winter'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Winter'</span><span class="p">,</span>

    <span class="p">[</span><span class="s1">'collapsibleTable1'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Agriculturist and Speed-Gro Comparison'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'collapsibleTable1Unirrigated'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Agriculturist and Speed-Gro Comparison - Unirrigated'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'collapsibleTable2Irrigated'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Agriculturist and Speed-Gro Comparison - Irrigated'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'regular'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Regular'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'note'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\'\'</span><span class="s1">Note that the 10% table also applies to the [[Farming#Farming Skill|Agriculturist Profession]] without any fertilizer.</span><span class="se">\'\'</span><span class="s1">'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'dayOne'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' 1'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'base'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Base'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'irrigated'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' Irrigated'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'unirrigated'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' Unirrigated'</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'ifPlantOn'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' (if planted on '</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">'closeParen'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">')'</span>
  <span class="p">}</span>
  
<span class="c1">----------crops' data----------</span>
  <span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="s2">"Parsnip"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1/spring/0/24/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Green Bean"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"0 1 1 1 3 4/spring/1/188/3/0/false/true/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Cauliflower"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 4 4 1/spring/2/190/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Potato"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 2 1/spring/3/192/-1/0/true 1 1 0 .2/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Garlic"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1/spring/4/248/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Unmilled Rice"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 3/spring/34/271/-1/1/true 1 1 10 .1/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Taro Root"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 3 4/summer/42/830/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Kale"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 1/spring/5/250/-1/1/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Rhubarb"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 2 2 3 4/spring/6/252/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Strawberry"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 2 2 2/spring/36/400/4/0/true 1 1 0 .02/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Melon"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 3 3 3/summer/7/254/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Tomato"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 2 2 2 3/summer/8/256/4/0/true 1 1 0 .05/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Blueberry"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 3 3 4 2/summer/9/258/4/0/true 3 3 0 .02/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Hot Pepper"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1 1/summer/10/260/3/0/true 1 1 0 .03/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Wheat"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1/summer fall/11/262/-1/1/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Radish"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 1 2 1/summer/12/264/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Red Cabbage"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 1 2 2 2/summer/13/266/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Starfruit"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 3 2 3 3/summer/14/268/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Pineapple"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 3 3 4 3/summer/43/832/7/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Coffee Bean"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 3 2/spring summer/40/433/2/0/true 4 4 0 .02/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Cactus Fruit"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 2 2 3 3/spring summer fall winter/41/90/3/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Corn"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 3 3 3 3/summer fall/15/270/4/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Hops"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 0 1 2 3 4/summer/37/304/1/0/false/true/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Grape"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 2 3 3/fall/38/398/3/0/false/true/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Amaranth"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 2/fall/39/300/-1/1/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Eggplant"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1 1/fall/16/272/5/0/true 1 1 0 .002/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Artichoke"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 2 1 2 1/fall/17/274/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Pumpkin"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 3 4 3/fall/18/276/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Bok Choy"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1/fall/19/278/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Yam"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 3 3 3/fall/20/280/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Cranberries"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 1 1 2/fall/21/282/5/0/true 2 2 0 .1/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Beet"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 2 2/fall/22/284/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Ancient Fruit"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 7 7 7 5/spring summer fall/24/454/7/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Tulip"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 2 2/spring/26/591/-1/0/false/false/true 255 186 255 223 191 255 255 246 0 255 80 0 255 158 193"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Blue Jazz"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 2/spring/27/597/-1/0/false/false/true 35 127 255 109 131 255 112 207 255 191 228 255 94 121 255 40 150 255"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Poppy"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 2/summer/28/376/-1/0/false/false/true 255 0 0 254 254 254 255 170 0"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Summer Spangle"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 3 2/summer/29/593/-1/0/false/false/true 0 208 255 99 255 210 255 212 0 255 144 122 255 0 238 206 91 255"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Sunflower"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 3 2/summer fall/30/421/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Fairy Rose"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 4 4 3/fall/31/595/-1/0/false/false/true 187 0 255 119 137 255 71 227 255 255 127 144 205 178 255 140 119 255"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Sweet Gem Berry"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"2 4 6 6 6/fall/32/417/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Wild Horseradish"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"3 4/spring/23/16/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Spice Berry"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"3 4/summer/23/396/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Common Mushroom"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"3 4/fall/23/404/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Winter Root"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"3 4/winter/23/412/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Fiber"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 2 2 2/spring summer fall winter/44/771/-1/1/true 4 7 0 .01/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Qi Fruit"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"1 1 1 1/spring summer fall winter/47/889/-1/0/false/false/false"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Wild Seeds"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"3 4/spring/23/16/-1/0/false/false/false"</span>
  <span class="p">}</span>
  
  <span class="kd">local</span> <span class="n">cropData</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">name</span><span class="p">],</span><span class="s2">"/"</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">phaseDays</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">cropData</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">" "</span><span class="p">)</span>
  <span class="kr">if</span> <span class="ow">not</span> <span class="n">season</span> <span class="kr">then</span>
    <span class="n">season</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">cropData</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s2">" "</span><span class="p">)</span>
  <span class="kr">else</span>
    <span class="n">season</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">season</span><span class="p">,</span> <span class="s2">" "</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">regrowth</span> <span class="o">=</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">cropData</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
  
  <span class="c1">-- When mode = 'base', only return base wikitable</span>
  <span class="kr">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'base'</span> <span class="kr">then</span>
  	<span class="kr">return</span> <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="n">speedIncrease</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
  <span class="kr">end</span>
 
<span class="c1">----------cropCalendars begin (irrigation='yes')---------- </span>
  <span class="kd">local</span> <span class="n">cropCalendars</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="c1">-- whether the crop can be irrigated or not</span>
  <span class="kr">if</span> <span class="n">irrigation</span> <span class="o">==</span> <span class="s1">'yes'</span> <span class="kr">then</span>
  	
  	<span class="c1">-- Base form</span>
    <span class="n">cropCalendars</span> <span class="o">=</span> <span class="n">cropCalendars</span><span class="o">..</span>
     <span class="s1">'&lt;table&gt;&lt;tr&gt;&lt;td&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;&lt;td&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;'</span><span class="o">..</span>
     
     <span class="c1">-- Agriculturist and Speed-Gro Comparison - Unirrigated</span>
     <span class="s1">'&lt;table class=</span><span class="se">\"</span><span class="s1">wikitable mw-collapsible mw-collapsed</span><span class="se">\"</span><span class="s1"> id=</span><span class="se">\"</span><span class="s1">roundedborder</span><span class="se">\"</span><span class="s1"> style="text-align:center;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;&lt;th colspan=</span><span class="se">\"</span><span class="s1">4</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">min-width:450px; min-height:40px;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'collapsibleTable1Unirrigated'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;&lt;/th&gt;&lt;th&gt;[[File:Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'speedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Deluxe Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'deluxeSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Hyper Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'hyperSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th rowspan=</span><span class="se">\"</span><span class="s1">2</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'regular'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td colspan=</span><span class="se">\"</span><span class="s1">3</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">background-color: transparent; padding: 0 0 0 8px; text-align: left; font-size: smaller; border: 0;</span><span class="se">\"</span><span class="s1">&gt;*'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'note'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap; margin-top: 84px;</span><span class="se">\"</span><span class="s1">&gt;[[File:Agriculturist.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'agriculturist'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">|&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.43</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'no'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;/table&gt;'</span><span class="o">..</span>
     
     <span class="c1">-- Agriculturist and Speed-Gro Comparison - Irrigated</span>
     <span class="s1">'&lt;table class=</span><span class="se">\"</span><span class="s1">wikitable mw-collapsible mw-collapsed</span><span class="se">\"</span><span class="s1"> id=</span><span class="se">\"</span><span class="s1">roundedborder</span><span class="se">\"</span><span class="s1"> style="text-align:center;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;&lt;th colspan=</span><span class="se">\"</span><span class="s1">4</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">min-width:450px; min-height:40px;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'collapsibleTable2Irrigated'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;&lt;/th&gt;&lt;th&gt;[[File:Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'speedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Deluxe Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'deluxeSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Hyper Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'hyperSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th rowspan=</span><span class="se">\"</span><span class="s1">2</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'regular'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td colspan=</span><span class="se">\"</span><span class="s1">3</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">background-color: transparent; padding: 0 0 0 8px; text-align: left; font-size: smaller; border: 0;</span><span class="se">\"</span><span class="s1">&gt;*'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'note'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap; margin-top: 84px;</span><span class="se">\"</span><span class="s1">&gt;[[File:Agriculturist.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'agriculturist'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">|&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.43</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;/table&gt;'</span>
    
<span class="c1">----------cropCalendars begin (irrigation=default)----------</span>
  <span class="c1">-- Base form</span>
  <span class="kr">else</span>
    <span class="n">cropCalendars</span> <span class="o">=</span> <span class="n">cropCalendars</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;table class=</span><span class="se">\"</span><span class="s1">wikitable mw-collapsible mw-collapsed</span><span class="se">\"</span><span class="s1"> id=</span><span class="se">\"</span><span class="s1">roundedborder</span><span class="se">\"</span><span class="s1"> style="text-align:center;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;&lt;th colspan=</span><span class="se">\"</span><span class="s1">4</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">min-width:450px; min-height:40px;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'collapsibleTable1'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;&lt;/th&gt;&lt;th&gt;[[File:Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'speedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Deluxe Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'deluxeSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th&gt;[[File:Hyper Speed-Gro.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'hyperSpeedGro'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th rowspan=</span><span class="se">\"</span><span class="s1">2</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'regular'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td colspan=</span><span class="se">\"</span><span class="s1">3</span><span class="se">\"</span><span class="s1"> style=</span><span class="se">\"</span><span class="s1">background-color: transparent; padding: 0 0 0 8px; text-align: left; font-size: smaller; border: 0;</span><span class="se">\"</span><span class="s1">&gt;*'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'note'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">max-width: 2em; padding: 0;</span><span class="se">\"</span><span class="s1">&gt;&lt;div style=</span><span class="se">\"</span><span class="s1">transform:rotate(-90deg); white-space: nowrap; margin-top: 84px;</span><span class="se">\"</span><span class="s1">&gt;[[File:Agriculturist.png|24px|link=]] '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'agriculturist'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/div&gt;&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;td style=</span><span class="se">\"</span><span class="s1">background-color: transparent; border: 0;</span><span class="se">\"</span><span class="s1">|&gt;'</span><span class="o">..</span>
     <span class="n">p</span><span class="p">.</span><span class="n">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="mf">0.43</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">)</span><span class="o">..</span>
     <span class="s1">'&lt;/td&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;/tr&gt;&lt;/table&gt;'</span>
  <span class="kr">end</span>
<span class="c1">----------cropCalendars end---------- </span>

  <span class="kr">return</span> <span class="n">cropCalendars</span>
<span class="kr">end</span>

<span class="c1">----------return given crop's calendar (only one table each time)----------</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">month</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">,</span> <span class="n">regrowth</span><span class="p">,</span> <span class="n">speedIncrease</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="n">irrigation</span><span class="p">,</span> <span class="n">stageImage</span><span class="p">,</span> <span class="n">cropImage</span><span class="p">,</span> <span class="p">...)</span>
  <span class="kd">local</span> <span class="n">phaseDays</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="n">phaseDays</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">season</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="n">season</span><span class="p">)</span>
  <span class="c1">-- whether input title</span>
  <span class="kd">local</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="kr">if</span> <span class="p">...</span> <span class="kr">then</span>
    <span class="n">title</span> <span class="o">=</span> <span class="p">...</span>
  <span class="kr">end</span>
  
  <span class="c1">-- define sizeString used in image, e.g. sizeString = '|36px'</span>
  <span class="c1">-- define cellWidth used in wikitable</span>
  <span class="kd">local</span> <span class="n">sizeString</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="kd">local</span> <span class="n">cellWidth</span> <span class="o">=</span> <span class="s1">'48px'</span>
  <span class="kr">if</span> <span class="n">size</span> <span class="o">~=</span> <span class="s1">''</span> <span class="kr">then</span>
    <span class="n">sizeString</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">..</span><span class="n">size</span><span class="o">..</span><span class="s1">'px'</span>
    <span class="n">cellWidth</span> <span class="o">=</span> <span class="n">size</span><span class="o">..</span><span class="s1">'px'</span>
  <span class="kr">end</span>
  
  <span class="kd">local</span> <span class="n">totalDaysOfCropGrowth</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="c1">-- only support 2 seasons because of layout. Display 1 season when crop can't regrow.</span>
  <span class="kr">if</span> <span class="o">#</span><span class="n">season</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">regrowth</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">then</span>
  	<span class="n">season</span> <span class="o">=</span> <span class="n">season</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">end</span>
  <span class="c1">-- speedIncrease + 0.25 when irragated</span>
  <span class="n">speedIncreaseInitial</span> <span class="o">=</span> <span class="n">speedIncrease</span>
  <span class="kr">if</span> <span class="n">irrigation</span> <span class="o">==</span> <span class="s1">'yes'</span> <span class="kr">then</span>
  	<span class="n">speedIncrease</span> <span class="o">=</span> <span class="n">speedIncrease</span> <span class="o">+</span> <span class="mf">0.25</span>
  <span class="kr">end</span>
  
  <span class="c1">-- transform string in phaseDays to number</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">phaseDays</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
  	<span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
  	<span class="n">totalDaysOfCropGrowth</span>  <span class="o">=</span> <span class="n">totalDaysOfCropGrowth</span> <span class="o">+</span> <span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
  <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">daysToRemove</span> <span class="o">=</span> <span class="nb">math.ceil</span><span class="p">(</span><span class="n">totalDaysOfCropGrowth</span> <span class="o">*</span> <span class="n">speedIncrease</span><span class="p">)</span>

  <span class="c1">-- Unexpected result in C# when using floating-point arithmetic, see Talk:Crop Growth Calendars</span>
  <span class="c1">-- Only consider totalDaysOfCropGrowth &lt;=28 and (speedIncrease = 0.1,0.2,0.25,0.35,0.45,0.5,0.6, 0.33,0.43,0.68)</span>
  <span class="kr">if</span> <span class="n">speedIncrease</span> <span class="o">==</span> <span class="mf">0.1</span> <span class="kr">then</span>
    <span class="kr">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">}</span> <span class="kr">do</span>
      <span class="kr">if</span> <span class="n">totalDaysOfCropGrowth</span> <span class="o">==</span> <span class="n">value</span> <span class="kr">then</span>
        <span class="n">daysToRemove</span> <span class="o">=</span> <span class="n">daysToRemove</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="kr">break</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">elseif</span> <span class="n">speedIncrease</span> <span class="o">==</span> <span class="mf">0.2</span> <span class="kr">then</span>
    <span class="kr">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span> <span class="kr">do</span>
      <span class="kr">if</span> <span class="n">totalDaysOfCropGrowth</span> <span class="o">==</span> <span class="n">value</span> <span class="kr">then</span>
        <span class="n">daysToRemove</span> <span class="o">=</span> <span class="n">daysToRemove</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="kr">break</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">elseif</span> <span class="n">speedIncrease</span> <span class="o">==</span> <span class="mf">0.6</span> <span class="kr">then</span>
    <span class="kr">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span> <span class="kr">do</span>
      <span class="kr">if</span> <span class="n">totalDaysOfCropGrowth</span> <span class="o">==</span> <span class="n">value</span> <span class="kr">then</span>
        <span class="n">daysToRemove</span> <span class="o">=</span> <span class="n">daysToRemove</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="kr">break</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  
  <span class="c1">-- calculate phaseDays after speedIncrease</span>
  <span class="kd">local</span> <span class="n">tries</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="c1">-- special:misnamed crop images, e.g. Green Bean, Hops. </span>
  <span class="c1">-- Delete the 0 cell before removing and add them back after removing</span>
  <span class="kd">local</span> <span class="n">phaseZero</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">phaseDays</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
      <span class="n">phaseZero</span> <span class="o">=</span> <span class="n">i</span>
      <span class="nb">table.remove</span><span class="p">(</span><span class="n">phaseDays</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
      <span class="kr">break</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  <span class="c1">-- Calculate. ConcernApe's C# code doesn't consider phaseDay[i] = 0. </span>
  <span class="c1">-- So the following code doesn't consider this situation, too.</span>
  <span class="c1">-- e.g. phaseDays = {1,1,2,3,3} (Grape), speedIncrease = 0.43.</span>
  <span class="c1">-- After removing, it becomes {1,-1,1,2,2}. Totalday is 1+1+2+2=6. And actually it is 6 days in  the game. </span>
  <span class="c1">-- However, if speedIncrease = 0.43, it should be 5 days {1,0,0,2,2}</span>
  <span class="kr">while</span> <span class="n">daysToRemove</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tries</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="kr">do</span>
    <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">phaseDays</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
      <span class="kr">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
        <span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">phaseDays</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">daysToRemove</span> <span class="o">=</span> <span class="n">daysToRemove</span> <span class="o">-</span> <span class="mi">1</span>
      <span class="kr">end</span>
      <span class="kr">if</span> <span class="n">daysToRemove</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="n">tries</span> <span class="o">=</span> <span class="n">tries</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="kr">end</span>
  <span class="c1">-- Add back</span>
  <span class="kr">if</span> <span class="n">phaseZero</span> <span class="o">~=</span> <span class="mi">0</span> <span class="kr">then</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">phaseDays</span><span class="p">,</span> <span class="n">phaseZero</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="kr">end</span>
  
  <span class="c1">-- 2-month days picture</span>
  <span class="kd">local</span> <span class="n">picList</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">daysLeft</span>  <span class="o">=</span> <span class="mi">56</span>
  <span class="kd">local</span> <span class="n">circulateOrNot</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="kr">while</span> <span class="n">daysLeft</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">do</span>
  	<span class="c1">-- Crops which are reseeded should skip Day 1</span>
  	<span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">&lt;</span> <span class="mi">56</span> <span class="ow">and</span> <span class="n">circulateOrNot</span> <span class="o">~=</span> <span class="s1">'yes'</span> <span class="kr">then</span>
      <span class="n">phaseDays</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">phaseDays</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
      <span class="n">circulateOrNot</span> <span class="o">=</span> <span class="s1">'yes'</span>
    <span class="kr">end</span>
  	<span class="kr">for</span> <span class="n">stage</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">phaseDays</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
  	  <span class="kr">for</span> <span class="n">stageDay</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">phaseDays</span><span class="p">[</span><span class="n">stage</span><span class="p">],</span> <span class="mi">1</span> <span class="kr">do</span>
  	  	<span class="c1">-- special: File:Hot_Pepper_Stage_4b.png</span>
  	  	<span class="kr">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">'Hot Pepper'</span> <span class="ow">and</span> <span class="n">stage</span> <span class="o">==</span> <span class="mi">5</span> <span class="kr">then</span>
          <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">stageImage</span><span class="o">..</span><span class="s1">' 4b.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
  	    <span class="kr">else</span>
  	      <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">stageImage</span><span class="o">..</span><span class="s1">' '</span><span class="o">..</span><span class="n">stage</span><span class="o">..</span><span class="s1">'.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
  	    <span class="kr">end</span>
  	    <span class="n">daysLeft</span> <span class="o">=</span> <span class="n">daysLeft</span> <span class="o">-</span> <span class="mi">1</span>
  	    <span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
  	  <span class="kr">end</span>
  	  <span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">cropImage</span><span class="o">..</span><span class="s1">'.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
  	<span class="n">daysLeft</span> <span class="o">=</span> <span class="n">daysLeft</span> <span class="o">-</span> <span class="mi">1</span>
  	<span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
    <span class="kr">if</span> <span class="n">regrowth</span> <span class="o">~=</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">then</span>
      <span class="kd">local</span> <span class="n">stageRegrowth</span> <span class="o">=</span> <span class="o">#</span><span class="n">phaseDays</span> <span class="o">+</span> <span class="mi">2</span>
      <span class="kr">while</span> <span class="n">daysLeft</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">do</span>
        <span class="kr">for</span> <span class="n">regrowthDays</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">regrowth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
  	  	  <span class="c1">-- special: File:Hot_Pepper_Stage_6.png</span>
  	  	  <span class="kr">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">'Hot Pepper'</span> <span class="kr">then</span>
            <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">stageImage</span><span class="o">..</span><span class="s1">' 6.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
          <span class="kr">else</span>
            <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">stageImage</span><span class="o">..</span><span class="s1">' '</span><span class="o">..</span><span class="n">stageRegrowth</span><span class="o">..</span><span class="s1">'.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
          <span class="kr">end</span>
          <span class="n">daysLeft</span> <span class="o">=</span> <span class="n">daysLeft</span> <span class="o">-</span> <span class="mi">1</span>
          <span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
        <span class="kr">end</span>
        <span class="kr">if</span> <span class="n">daysLeft</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span> <span class="kr">break</span> <span class="kr">end</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">picList</span><span class="p">,</span> <span class="s1">'[[File:'</span><span class="o">..</span><span class="n">cropImage</span><span class="o">..</span><span class="s1">'.png'</span><span class="o">..</span><span class="n">sizeString</span><span class="o">..</span><span class="s1">'|center|link=]]'</span><span class="p">)</span>
        <span class="n">daysLeft</span> <span class="o">=</span> <span class="n">daysLeft</span> <span class="o">-</span> <span class="mi">1</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  
  <span class="c1">-- table title relating to speedIncrease (10% and 0% are special)</span>
  <span class="kr">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s1">''</span> <span class="kr">then</span>  
    <span class="kr">if</span> <span class="n">speedIncreaseInitial</span> <span class="o">==</span> <span class="mf">0.1</span> <span class="ow">or</span> <span class="n">speedIncreaseInitial</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="kr">then</span>
      <span class="kr">if</span> <span class="n">speedIncreaseInitial</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
    	  <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'base'</span><span class="p">]</span>
    	<span class="kr">else</span>
    	  <span class="n">title</span> <span class="o">=</span> <span class="s1">'10%*'</span>
      <span class="kr">end</span>
    <span class="kr">else</span>
    	<span class="n">title</span> <span class="o">=</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">speedIncreaseInitial</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">..</span><span class="s1">'%'</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  
  <span class="c1">-- irrigation</span>
  <span class="kr">if</span> <span class="n">irrigation</span> <span class="o">==</span> <span class="s1">'yes'</span> <span class="kr">then</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'irrigated'</span><span class="p">]</span>
  <span class="kr">end</span>
  <span class="kr">if</span> <span class="n">irrigation</span> <span class="o">==</span> <span class="s1">'no'</span> <span class="kr">then</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'unirrigated'</span><span class="p">]</span>
  <span class="kr">end</span>
  
  <span class="c1">-- wikitable's header row</span>
  <span class="kd">local</span> <span class="n">wikitableTitle</span> <span class="o">=</span> <span class="s1">''</span><span class="o">..</span>
   <span class="s1">'&lt;table class=</span><span class="se">\"</span><span class="s1">wikitable</span><span class="se">\"</span><span class="s1"> id=</span><span class="se">\"</span><span class="s1">roundedborder</span><span class="se">\"</span><span class="s1"> style="text-align:center;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th colspan=</span><span class="se">\"</span><span class="s1">7</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">title</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;/tr&gt;'</span>
  
  <span class="c1">-- calendar season 1</span>
  <span class="kd">local</span> <span class="n">wikitable1</span> <span class="o">=</span> <span class="s1">''</span><span class="o">..</span>
   <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'monday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'tuesday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'wednesday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'thursday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'friday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'saturday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
   <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'sunday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span>
  <span class="c1">-- crops images</span>
  <span class="kr">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
  	<span class="c1">-- another row</span>
  	<span class="kr">if</span> <span class="nb">math.fmod</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
  		<span class="n">wikitable1</span> <span class="o">=</span> <span class="n">wikitable1</span><span class="o">..</span><span class="s1">'&lt;/tr&gt;&lt;tr&gt;'</span>
  	<span class="kr">end</span>
    <span class="n">wikitable1</span> <span class="o">=</span> <span class="n">wikitable1</span><span class="o">..</span><span class="s1">'&lt;td&gt;'</span><span class="o">..</span><span class="n">picList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span>
  <span class="kr">end</span>
  <span class="n">wikitable1</span> <span class="o">=</span> <span class="n">wikitable1</span><span class="o">..</span><span class="s1">'&lt;/tr&gt;'</span>
  
  <span class="kd">local</span> <span class="n">wikitable2</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="c1">-- special:calendar season 2</span>
  <span class="kr">if</span> <span class="o">#</span><span class="n">season</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
    <span class="n">wikitable2</span> <span class="o">=</span> <span class="n">wikitable2</span><span class="o">..</span>
     <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'monday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'tuesday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'wednesday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'thursday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'friday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'saturday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
     <span class="s1">'&lt;th style=</span><span class="se">\"</span><span class="s1">width: '</span><span class="o">..</span><span class="n">cellWidth</span><span class="o">..</span><span class="s1">';</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'sunday'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span>
      <span class="c1">-- crops images</span>
      <span class="kr">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">29</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">1</span> <span class="kr">do</span>
      	<span class="c1">-- another row</span>
        <span class="kr">if</span> <span class="nb">math.fmod</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
      		<span class="n">wikitable2</span> <span class="o">=</span> <span class="n">wikitable2</span><span class="o">..</span><span class="s1">'&lt;/tr&gt;&lt;tr&gt;'</span>
      	<span class="kr">end</span>
        <span class="n">wikitable2</span> <span class="o">=</span> <span class="n">wikitable2</span><span class="o">..</span><span class="s1">'&lt;td&gt;'</span><span class="o">..</span><span class="n">picList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/td&gt;'</span>
      <span class="kr">end</span>
      <span class="n">wikitable2</span> <span class="o">=</span> <span class="n">wikitable2</span><span class="o">..</span><span class="s1">'&lt;/tr&gt;'</span>
    <span class="kr">end</span>
  
  <span class="kd">local</span> <span class="n">wikitable</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="c1">-- 1 or 2 tables to output</span>
  <span class="kr">if</span> <span class="o">#</span><span class="n">season</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
    <span class="c1">-- horizontal or vertical tables</span>
    <span class="kr">if</span> <span class="n">speedIncrease</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
      <span class="kd">local</span> <span class="n">wikitableTitle2</span> <span class="o">=</span> <span class="s1">''</span><span class="o">..</span>
       <span class="s1">'&lt;table class=</span><span class="se">\"</span><span class="s1">wikitable</span><span class="se">\"</span><span class="s1"> id=</span><span class="se">\"</span><span class="s1">roundedborder</span><span class="se">\"</span><span class="s1"> style="text-align:center;</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;th colspan=</span><span class="se">\"</span><span class="s1">7</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'base'</span><span class="p">]</span><span class="o">..</span><span class="s1">' - '</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="n">season</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'ifPlantOn'</span><span class="p">]</span><span class="o">..</span>
       <span class="n">Dictionary</span><span class="p">[</span><span class="n">season</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'dayOne'</span><span class="p">]</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="s1">'closeParen'</span><span class="p">]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;/tr&gt;'</span>
      <span class="n">wikitable</span> <span class="o">=</span> <span class="n">wikitable</span><span class="o">..</span><span class="s1">'&lt;table&gt;&lt;tr&gt;&lt;td&gt;'</span><span class="o">..</span>
       <span class="n">wikitableTitle</span><span class="o">..</span>
       <span class="n">wikitable1</span><span class="o">..</span>
       <span class="s1">'&lt;/table&gt;&lt;/td&gt;&lt;td&gt;'</span><span class="o">..</span>
       <span class="n">wikitableTitle2</span><span class="o">..</span>
       <span class="n">wikitable2</span><span class="o">..</span>
       <span class="s1">'&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;'</span>
    <span class="kr">else</span>
      <span class="n">wikitable</span> <span class="o">=</span> <span class="n">wikitable</span><span class="o">..</span>
       <span class="n">wikitableTitle</span><span class="o">..</span>
       <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;th colspan=</span><span class="se">\"</span><span class="s1">7</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="n">season</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
       <span class="n">wikitable1</span><span class="o">..</span>
       <span class="s1">'&lt;tr&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;th colspan=</span><span class="se">\"</span><span class="s1">7</span><span class="se">\"</span><span class="s1">&gt;'</span><span class="o">..</span><span class="n">Dictionary</span><span class="p">[</span><span class="n">season</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">..</span><span class="s1">'&lt;/th&gt;'</span><span class="o">..</span>
       <span class="s1">'&lt;/tr&gt;'</span><span class="o">..</span>
       <span class="n">wikitable2</span><span class="o">..</span>
       <span class="s1">'&lt;/table&gt;'</span>
    <span class="kr">end</span>
  <span class="kr">else</span>
    <span class="n">wikitable</span> <span class="o">=</span> <span class="n">wikitable</span><span class="o">..</span><span class="n">wikitableTitle</span><span class="o">..</span><span class="n">wikitable1</span><span class="o">..</span><span class="s1">'&lt;/table&gt;'</span>
  <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">wikitable</span>
<span class="kr">end</span>

<span class="c1">----------clone tables----------</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">t2</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="kr">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="kr">do</span>
      <span class="n">t2</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">t2</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">p</span>
</pre></div>
<!-- 
NewPP limit report
Cached time: 20250304125348
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.072 seconds
Real time usage: 0.079 seconds
Preprocessor visited node count: 4/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 98785/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key enwiki:pcache:idhash:13082-0!canonical and timestamp 20250304125348 and revision id 120757
 -->
</div></div><div class="printfooter">Retrieved from "<a dir="ltr" href="https://stardewvalleywiki.com/mediawiki/index.php?title=User:Horizon98/Crop_Growth_Calendars&amp;oldid=120757">https://stardewvalleywiki.com/mediawiki/index.php?title=User:Horizon98/Crop_Growth_Calendars&amp;oldid=120757</a>"</div>
<div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div>
</div>