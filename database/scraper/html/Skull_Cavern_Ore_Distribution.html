<div class="mw-body-content" id="bodyContent">
<div class="noprint" id="siteSub">From Stardew Valley Wiki</div>
<div id="contentSub"></div>
<div id="contentSub2"></div>
<div id="jump-to-nav"></div>
<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
<a class="mw-jump-link" href="#searchInput">Jump to search</a>
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>Small minable stones and ores can appear as random stones throughout the floor, or rarely as small clumps. These have different distributions<sup class="reference" id="cite_ref-populateLevel_1-0"><a href="#cite_note-populateLevel-1">[1]</a></sup><sup class="reference" id="cite_ref-createLitterObject_2-0"><a href="#cite_note-createLitterObject-2">[2]</a></sup>.
On average there will be less than 0.67 small resource clumps on each floor with neutral luck, and less than 1 for the largest possible luck. These clumps have a 25% chance to be a dark grey rock (stone ore), a 1.5% chance to be iridium, and a 73.5% chance to be gold.
</p><p>The distribution for random stones is more complex and varies with depth and best understood in a few stages.
</p><p>If a <a href="/Quests#List_of_Mr._Qi.27s_Special_Orders" title="Quests">Qi quest</a> is in progress which makes the mine more dangerous, there is a small chance for a stone to be replaced with a <a href="/Mining#Radioactive_Node" title="Mining">radioactive node</a>. This is very dependent upon <a href="/Luck" title="Luck">luck</a>, with the luck boost from the special charm being worth 192 floors, and the worst luck requiring a depth of floor 550 to have any chance ore will drop. This is also dependent on luck <a href="/Buffs" title="Buffs">buffs</a>, with each level of luck worth 15 floors. This will replace any of the below stones.
</p><p>The chance for a stone to be a metal ore (<a href="/Copper_Ore" title="Copper Ore">copper</a>, <a href="/Iron_Ore" title="Iron Ore">iron</a>, <a href="/Gold_Ore" title="Gold Ore">gold</a>, or <a href="/Iridium_Ore" title="Iridium Ore">iridium</a>) will vary depending on floor, starting at 2% on floor 1, rapidly increasing to 16% on floor 100, and then increasing to 100% on floor 1780. Luck has no effect on this chance, or on the ore distribution. Copper and iron have the same distribution. From floor 2010 only <a href="/Gold_Ore" title="Gold Ore">gold</a> and <a href="/Iridium_Ore" title="Iridium Ore">iridium ore</a> will be found, and from floor 5700 only iridium ore will be found from this generation.
</p><p>If the stone is not a metal ore, there is a chance for it to be a a gem stone ore (<a href="/Diamond" title="Diamond">diamond</a>, <a href="/Emerald" title="Emerald">emerald</a>, <a href="/Aquamarine" title="Aquamarine">aquamarine</a>, <a href="/Ruby" title="Ruby">ruby</a>, <a href="/Amethyst" title="Amethyst">amethyst</a>, <a href="/Topaz" title="Topaz">topaz</a>, and <a href="/Jade" title="Jade">jade</a>), a gem node (the round purple stone), a mystic stone or a dark grey rock. This means that the chance can decrease as you go deeper as more of the stone is metal ore, and above floor 1780 these will not be found.
Luck and mining level only play a significant role for <a href="/Mining#Mystic_Stone" title="Mining">mystic stones</a> and gem nodes. For others the contribution is negligible.
</p><p>For gem stone ores, diamond is slightly rarer than most, and jade is twice as rare as most. The chance initially increases, peaking at a chance of ≈0.35% (≈0.18% for jade) at a depth of ≈800, before dropping back down.
</p><p>Dark grey rocks, start with their maximum chance at floor 1 (9.73% for dark grey rocks, 0.005% for mystic stones, 0.059% for gem nodes for best chances), and drop proportionally as ores take their place.
</p><p>During the <a href="/Desert_Festival" title="Desert Festival">Desert Festival</a>, there are some small changes to how the ore is generated, this is to allow the generation of <a href="/Mining#Calico_Egg_Node" title="Mining">Calico egg nodes</a>. This occurs below in the section to generate ore clumps, and the section to generate metallic ores.
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Code_Details"><span class="tocnumber">1</span> <span class="toctext">Code Details</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Ore_Clumps"><span class="tocnumber">1.1</span> <span class="toctext">Ore Clumps</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Random_ore_placement_.28createLitterObject.29"><span class="tocnumber">1.2</span> <span class="toctext">Random ore placement (createLitterObject)</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Radioactive_Ore"><span class="tocnumber">1.2.1</span> <span class="toctext">Radioactive Ore</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Metal_Ores"><span class="tocnumber">1.2.2</span> <span class="toctext">Metal Ores</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Other_ores"><span class="tocnumber">1.2.3</span> <span class="toctext">Other ores</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Ores_From_Rocks"><span class="tocnumber">1.3</span> <span class="toctext">Ores From Rocks</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Links_to_Desmos_Graphs"><span class="tocnumber">1.4</span> <span class="toctext">Links to Desmos Graphs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#History"><span class="tocnumber">2</span> <span class="toctext">History</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#References"><span class="tocnumber">3</span> <span class="toctext">References</span></a></li>
</ul>
</div>
<h2><span class="mw-headline" id="Code_Details">Code Details</span></h2>
<p>The main code for populating the floor is found in the function <code>StardewValley.Locations.MineShaft::populateLevel</code>. In setting up to populate the floor, it initially defines stoneChance as a random number (double) in the range [10,30), and gemStoneChance as 0.003. It then calls <code>StardewValley.Locations.MineShaft::adjustLevelChances</code>, which will perform a few checks including setting the chance to find stone to 0 for infested floors and dividing gem stone chance by 2<sup class="reference" id="cite_ref-adjustChances_3-0"><a href="#cite_note-adjustChances-3">[3]</a></sup>.
After this setup, it will then iterate through every square of the floor, and if it passes a few checks it will add a stone selected using the function <code>StardewValley.Locations.MineShaft::createLitterObject</code>, passing the gemstone chance from above and the magic numbers 0.001 and 5e-5 for gem nodes (internally chanceForPurpleStone) and mystic stones (internally chanceForMysticStone). In the same sweep, if it does not add a stone there is a chance for it to add a large resource clump, which are 2 possible variants of a 2 by 2 boulder.
</p><p>After iterating through every square, and performing a few other tasks, it will attempt to add ore clumps using the function <code>StardewValley.Locations.MineShaft::tryToAddOreClumps</code>, but only if the floor is not divisible by 5, and it is not a treasure room.
</p>
<h3><span class="mw-headline" id="Ore_Clumps">Ore Clumps</span></h3>
<p>In the <code>StardewValley.Locations.MineShaft::tryToAddOreClumps</code><sup class="reference" id="cite_ref-oreClumps_4-0"><a href="#cite_note-oreClumps-4">[4]</a></sup> function, a try will only be made if a random number is less than 0.55 plus the average daily <a href="/Luck" title="Luck">luck</a>. The maximum possible average daily luck is 0.1 from random luck and 0.025 from the special charm<sup class="reference" id="cite_ref-dailyLuck_5-0"><a href="#cite_note-dailyLuck-5">[5]</a></sup>. This means with neutral luck there is a 55% chance to try, and with the best possible luck there is a 67.5% chance.
It will try once, and then generate a random number and keep going if that random number is less than 0.25 plus the average daily luck.
This means there will be 1 chance, plus a 25% chance with neutral luck or a 37.5% chance with best possible luck.
</p><p>This gives an expected value of 1.3 recurring or 1.6 attempts to generate a clump, which when combined with the base chance to try gives an expected amount of 0.67 or 1.
</p><p>However, each try chooses a random tile on the map and will only place an ore clump there if the tile is free, resulting in less than these numbers.
</p><p>To choose which type of ore to add it calls the function <code>StardewValley.Locations.MineShaft::getAppropriateOre</code><sup class="reference" id="cite_ref-whichOre_6-0"><a href="#cite_note-whichOre-6">[6]</a></sup>, which just before returning has a 25% chance (if it is not in hard mode) to set the ore to 668 or 670, which are the dark grey rocks (stone ore).
</p><p>Otherwise, it first checks if the <a href="/Desert_Festival" title="Desert Festival">Desert Festival</a> is ongoing. If it is there is a (25 + <a href="/Desert_Festival#Skull_Cavern" title="Desert Festival">"Egg Rating"</a> / 20)% chance of the node being a <a href="/Mining#Calico_Egg_Node" title="Mining">Calico egg node</a>.
Otherwise, the ore is set as 764, gold ore, with a 2% chance to set it to 765, iridium ore.
</p><p>When the festival is not ongoing, this results in total chances of 25% for dark grey rocks, 1.5% chance for iridium ore, and 73.5% for gold.
</p>
<h3><span id="Random_ore_placement_(createLitterObject)"></span><span class="mw-headline" id="Random_ore_placement_.28createLitterObject.29">Random ore placement (createLitterObject)</span></h3>
<h4><span class="mw-headline" id="Radioactive_Ore">Radioactive Ore</span></h4>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/File:SDV_SC_Radioactive.png"><img alt="" class="thumbimage" decoding="async" height="196" src="/mediawiki/images/thumb/c/cb/SDV_SC_Radioactive.png/300px-SDV_SC_Radioactive.png" srcset="/mediawiki/images/thumb/c/cb/SDV_SC_Radioactive.png/450px-SDV_SC_Radioactive.png 1.5x, /mediawiki/images/thumb/c/cb/SDV_SC_Radioactive.png/600px-SDV_SC_Radioactive.png 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/File:SDV_SC_Radioactive.png" title="Enlarge"></a></div>Changing distribution of radioactive ore with luck (daily luck and luff buffs) with a difficulty of 1.</div></div></div>
<p>This will first produce radioactive ore, with the following check:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">GetAdditionalDifficulty</span><span class="p">()</span> <span class="p">&gt;</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">%</span> <span class="m">5</span> <span class="p">!=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">GetAdditionalDifficulty</span><span class="p">()</span> <span class="p">*</span> <span class="m">0.001</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)((</span><span class="kt">float</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">/</span> <span class="m">100000f</span><span class="p">)</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">team</span><span class="p">.</span><span class="n">AverageDailyLuck</span><span class="p">()</span> <span class="p">/</span> <span class="m">13.0</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">team</span><span class="p">.</span><span class="n">AverageLuckLevel</span><span class="p">()</span> <span class="p">*</span> <span class="m">0.0001500000071246177</span><span class="p">)</span>
</pre></div>
<p>The difficulty can be changed by using the statue at the cavern entrance or by accepting the <a href="/Quests#List_of_Mr._Qi.27s_Special_Orders" title="Quests">Qi quest</a> Skull Cavern Invasion. This provides 3 levels, normal (0), one of these active (1), or both of these active (2). With a difficulty of 0, no radioactive ore will spawn.
</p><p>The luck boost from the <a href="/Special_Charm" title="Special Charm">special charm</a> (0.025, contribution to AverageDailyLuck) is equivalent to an additional 192.3 floors (2500/13), and a single point of luck (such as from a food buff) is worth ≈15 floors. The boost from the additional difficulty (setting it to 2 instead of 1) is equivalent to 100 floors.
</p><p>With the difficulty set to 1, with the best possible luck (0.125 daily luck with special charm, +9 luck from <a href="/Magic_Rock_Candy" title="Magic Rock Candy">magic rock candy</a>, a <a href="/Ginger_Ale" title="Ginger Ale">ginger ale</a> made with <a href="/Qi_Seasoning" title="Qi Seasoning">Qi seasoning</a>, and 2 <a href="/Lucky_Ring" title="Lucky Ring">lucky rings</a>) 1.32% of stones will be <a href="/Radioactive_Ore" title="Radioactive Ore">radioactive ore</a> on floor 1, increasing to 1.42% on floor 99. With the worst possible luck no radioactive ore will appear until floor 550. Also note that radioactive ore will not appear on any floor divisible by 5.
</p><p>This means that hypothetically with the best possible luck, with difficulty set to 2, from floor 98584 onwards, except on floors divisible by 5, the only ore found from random stones would be radioactive ore. With the worst possible luck, this increases to floor 100450. Reaching these floors would require bypassing the <a href="/Quarry_Mine" title="Quarry Mine">Quarry Mine</a> floor, which can be found on floor 77257 of Skull Cavern.
</p>
<h4><span class="mw-headline" id="Metal_Ores">Metal Ores</span></h4>
<p>After this, it will go through the different areas, and for skull cavern, it will set the base stone type to 32, 38, 40 or 42 (equally), and then calculate several variables, in a few stages to give different definitions for different floor ranges
chanceForOre is defined in 2 parts, including using a min, and then compared to a random double to give 4 different regions:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>    <span class="kt">double</span> <span class="n">chanceForOre</span> <span class="p">=</span> <span class="m">0.02</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">skullCavernMineLevel</span> <span class="p">*</span> <span class="m">0.0005</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">&gt;=</span> <span class="m">130</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">chanceForOre</span> <span class="p">+=</span> <span class="m">0.01</span> <span class="p">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)((</span><span class="kt">float</span><span class="p">)(</span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">skullCavernMineLevel</span><span class="p">)</span> <span class="p">-</span> <span class="m">10</span><span class="p">)</span> <span class="p">/</span> <span class="m">10f</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>This ends up being defined as either <code>0.02 + skullCavernMineLevel * 0.0005 </code> for floors 1-10, <code>0.01 + skullCavernMineLevel * 0.0015</code> for floors 10 to 100 (when skullCavernMineLevel &lt;= 100), and <code>0.11 + skullCavernMineLevel * 0.0005</code> for floors 100 and up(when skullCavernMineLevel &gt;= 100). This means the chance for ore will increase by 0.05% for each floor, except between floors 10 and 100 where it increases by 0.15% each floor. This reaches 100% at floor 1780, providing the 4th region. At the crossover point of floor 10 the 2 chances are equal as the extra term is 0. This means the function is continuous. If this ore check passes it will return an ore.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/File:Skull_Cavern_Ore_Distribution.png"><img alt="" class="thumbimage" decoding="async" height="196" src="/mediawiki/images/thumb/7/76/Skull_Cavern_Ore_Distribution.png/300px-Skull_Cavern_Ore_Distribution.png" srcset="/mediawiki/images/thumb/7/76/Skull_Cavern_Ore_Distribution.png/450px-Skull_Cavern_Ore_Distribution.png 1.5x, /mediawiki/images/thumb/7/76/Skull_Cavern_Ore_Distribution.png/600px-Skull_Cavern_Ore_Distribution.png 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/File:Skull_Cavern_Ore_Distribution.png" title="Enlarge"></a></div>Changing distribution of metal ore with floor.</div></div></div>
<p>First, if the <a href="/Desert_Festival" title="Desert Festival">Desert Festival</a> is ongoing. If it is there is a (13 + <a href="/Desert_Festival#Skull_Cavern" title="Desert Festival">"Egg Rating"</a> / 20)% chance of the node being an <a href="/Mining#Calico_Egg_Node" title="Mining">Calico egg node</a>. This will not be included in the below graphs and discussions. After that, it first checking for <a href="/Iridium_Ore" title="Iridium Ore">iridium</a>, then <a href="/Gold_Ore" title="Gold Ore">gold</a>, then <a href="/Iron_Ore" title="Iron Ore">iron</a>, then returning <a href="/Copper_Ore" title="Copper Ore">copper</a>.
As an example, this means for a stone to be gold ore it must pass the ore check, then fail the iridium check, then pass the gold check.
This means in order to get an ore, the chance for the previous ore must be less than 100%, so once iridium ore reaches 100%, no other metal ores can be made.
The probability to get each ore (from a random stone) is therefore:
</p>
<pre>   iridium = chanceForOre*chanceForIridium
      gold = chanceForOre*(1-chanceForIridium)*chanceForGold
      iron = chanceForOre*(1-chanceForIridium)*(1-chanceForGold)*chanceForIron
    copper = chanceForOre*(1-chanceForIridium)*(1-chanceForGold)*(1-chanceForIron)
</pre>
<p>These probabilities are defined in the following code:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>    <span class="kt">double</span> <span class="n">iridiumBoost</span> <span class="p">=</span> <span class="m">0.0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">&gt;=</span> <span class="m">130</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">iridiumBoost</span> <span class="p">+=</span> <span class="m">0.001</span> <span class="p">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)((</span><span class="kt">float</span><span class="p">)(</span><span class="n">skullCavernMineLevel</span> <span class="p">-</span> <span class="m">10</span><span class="p">)</span> <span class="p">/</span> <span class="m">10f</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">iridiumBoost</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="n">iridiumBoost</span><span class="p">,</span> <span class="m">0.004</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">skullCavernMineLevel</span> <span class="p">&gt;</span> <span class="m">100</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">iridiumBoost</span> <span class="p">+=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">skullCavernMineLevel</span> <span class="p">/</span> <span class="m">1000000.0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">double</span> <span class="n">chanceForIridium</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">skullCavernMineLevel</span><span class="p">)</span> <span class="p">*</span> <span class="p">(</span><span class="m">0.0003</span> <span class="p">+</span> <span class="n">iridiumBoost</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">chanceForGold</span> <span class="p">=</span> <span class="m">0.01</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">-</span> <span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">150</span><span class="p">,</span> <span class="n">skullCavernMineLevel</span><span class="p">))</span> <span class="p">*</span> <span class="m">0.0005</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">chanceForIron</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span> <span class="m">0.1</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">-</span> <span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="n">skullCavernMineLevel</span><span class="p">))</span> <span class="p">*</span> <span class="m">0.005</span><span class="p">);</span>
</pre></div>
<p>The chance to find iridium relies upon an iridiumBoost variable which is split into four regions, floors 0-10, where there is no boost; floors 10 to 50, where the boost increases from 0 to 0.004; floors 50 to 99 where the boost remains constant at 0.004; and floor 100 and up, where there is a discontinuity with the boost jumping to <code>0.004 + 0.000001 * skullCavernMineLevel</code> (an increase of 0.0001).
This results in the overall function for the chance to find iridium being non-linear, and having 5 regions; importantly reaching 100% at floor 5700.
The gold ore chance variable is more straight forward, starting at a value of 7%, and once floor 150 is reached, increasing linearly until it reaches 100% at floor 2130.
The iron ore chance results in a value of 50%.
Additional floors of note are floor 30 where <a href="/Iridium_Ore" title="Iridium Ore">iridium ore</a> becomes more common than <a href="/Gold_Ore" title="Gold Ore">gold ore</a>, floor 74 where iridium ore becomes more common than <a href="/Iron_Ore" title="Iron Ore">iron</a> and <a href="/Copper_Ore" title="Copper Ore">copper ore</a>, floor 677 where gold ore becomes more common than iron and copper ore, floor 1081 where iridium ore becomes more common than non-metal ores, floor 1332 where gold ore becomes more common than non-metal ores, and floor 1725 where iron and copper ore becomes more common than non-metal ores.
</p>
<h4><span class="mw-headline" id="Other_ores">Other ores</span></h4>
<p>Additionally, up until this point, luck has not factored into the calculation.
However, if it does not pass the ore chance check (this means the final chances for these will need <code>1-chanceForOre</code> included), it moves on to gemstone ores, dark grey rocks (stone ore), purple stones and mystic stones.
This is done in the following complex code (some unneeded sections related to colored rocks have been removed, and additional comments added):
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>    <span class="kt">double</span> <span class="n">averageDailyLuck</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">team</span><span class="p">.</span><span class="n">AverageDailyLuck</span><span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">averageMiningLevel</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">team</span><span class="p">.</span><span class="n">AverageSkillLevel</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">chanceModifier</span> <span class="p">=</span> <span class="n">averageDailyLuck</span> <span class="p">+</span> <span class="n">averageMiningLevel</span> <span class="p">*</span> <span class="m">0.005</span><span class="p">;</span>
    <span class="c1">// Diamond node.</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">&gt;</span> <span class="m">50</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.00025</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">/</span> <span class="m">120000.0</span> <span class="p">+</span> <span class="m">0.0005</span> <span class="p">*</span> <span class="n">chanceModifier</span> <span class="p">/</span> <span class="m">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">whichStone</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
        <span class="n">stoneHealth</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Gem stone nodes.</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">gemStoneChance</span> <span class="p">!=</span> <span class="m">0.0</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="n">gemStoneChance</span> <span class="p">+</span> <span class="n">gemStoneChance</span> <span class="p">*</span> <span class="n">chanceModifier</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">/</span> <span class="m">24000.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="n">tile</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">getRandomGemRichStoneForThisLevel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span><span class="p">),</span> <span class="s">"Stone"</span><span class="p">,</span> <span class="n">canBeSetDown</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span> <span class="n">canBeGrabbed</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isHoedirt</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isSpawnedObject</span><span class="p">:</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">MinutesUntilReady</span> <span class="p">=</span> <span class="m">5</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="c1">// gem node (purple rocks).</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="n">chanceForPurpleStone</span> <span class="p">/</span> <span class="m">2.0</span> <span class="p">+</span> <span class="n">chanceForPurpleStone</span> <span class="p">*</span> <span class="n">averageMiningLevel</span> <span class="p">*</span> <span class="m">0.008</span> <span class="p">+</span> <span class="n">chanceForPurpleStone</span> <span class="p">*</span> <span class="p">(</span><span class="n">averageDailyLuck</span> <span class="p">/</span> <span class="m">2.0</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">whichStone</span> <span class="p">=</span> <span class="m">44</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Mystic stones.</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span> <span class="p">&gt;</span> <span class="m">100</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="n">chanceForMysticStone</span> <span class="p">+</span> <span class="n">chanceForMysticStone</span> <span class="p">*</span> <span class="n">averageMiningLevel</span> <span class="p">*</span> <span class="m">0.008</span> <span class="p">+</span> <span class="n">chanceForMysticStone</span> <span class="p">*</span> <span class="p">(</span><span class="n">averageDailyLuck</span> <span class="p">/</span> <span class="m">2.0</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">whichStone</span> <span class="p">=</span> <span class="m">46</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">whichStone</span> <span class="p">+=</span> <span class="n">whichStone</span> <span class="p">%</span> <span class="m">2</span><span class="p">;</span>
    <span class="c1">// Dark grey rock (stone ore).</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.1</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">getMineArea</span><span class="p">()</span> <span class="p">!=</span> <span class="m">40</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="n">tile</span><span class="p">,</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">?</span> <span class="m">668</span> <span class="p">:</span> <span class="m">670</span><span class="p">,</span> <span class="s">"Stone"</span><span class="p">,</span> <span class="n">canBeSetDown</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span> <span class="n">canBeGrabbed</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isHoedirt</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isSpawnedObject</span><span class="p">:</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">MinutesUntilReady</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
            <span class="n">Flipped</span> <span class="p">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.5</span><span class="p">)</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="n">tile</span><span class="p">,</span> <span class="n">whichStone</span><span class="p">,</span> <span class="s">"Stone"</span><span class="p">,</span> <span class="n">canBeSetDown</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span> <span class="n">canBeGrabbed</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isHoedirt</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">isSpawnedObject</span><span class="p">:</span> <span class="k">false</span><span class="p">)</span>	<span class="p">{</span>
        <span class="n">MinutesUntilReady</span> <span class="p">=</span> <span class="n">stoneHealth</span>
    <span class="p">};</span>
</pre></div>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/File:Skull_Cavern_Diamond.png"><img alt="" class="thumbimage" decoding="async" height="196" src="/mediawiki/images/thumb/0/02/Skull_Cavern_Diamond.png/300px-Skull_Cavern_Diamond.png" srcset="/mediawiki/images/thumb/0/02/Skull_Cavern_Diamond.png/450px-Skull_Cavern_Diamond.png 1.5x, /mediawiki/images/thumb/0/02/Skull_Cavern_Diamond.png/600px-Skull_Cavern_Diamond.png 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/File:Skull_Cavern_Diamond.png" title="Enlarge"></a></div>Changing distribution of diamond nodes with floor, luck, and mining level</div></div></div>
<p>Before analysing in full, it is worth noting the impact of <a href="/Luck" title="Luck">luck</a>. <a href="/Diamond" title="Diamond">Diamonds</a> and Gemstones both use <code>chanceModifier</code>. As daily luck ranges from a minimum of -0.1 to a maximum of 0.125 (with <a href="/Special_Charm" title="Special Charm">special charm</a>), and farmer level ranges from 0 to 14, the lowest this can be is -0.1, and the highest is 0.195. For diamonds this is multiplied by 0.0005 and divided by 2 making its effect range from -0.0025% to 0.004875%, or by approximately 0.007%, equivalent to 8.85 floors. For a farmer with the special charm and level 10 mining, the range is reduced to 0.005%, equivalent to 6.6 floors. This is also quite small compared to the base of 0.126% for floor 1 with 0 luck and 0 mining levels.
For gemstone ores, the range works out to be 0.044% for the entire range, or 0.033% for the reduced range; equivalent to 10.62 and 7.92 floors, and still small compared to the 0.654% at floor 1.
The chance for gem nodes and <a href="/Mining#Mystic_Stone" title="Mining">mystic stones</a> don't directly use the floor, and the multiplier for the chance is used in all parts of the calculation. Now the range for averageDailyLuck/2 (0.1125) is quite large, over 20% of the base 0.5 chance, making this much more dependent upon luck. Likewise, the 14 levels from mining contribute 0.112, over 10%, but the 4 gained from food buffs only contribute 0.032, much less significant. Likewise, for Mystic Stones the contribution from luck is over 10% of the base of 1, with the mining levels having a similarly reduced impact.
</p><p>This can be better understood by considering the exit points.
The first way to return from this function is by failing the diamond check and passing the gem stone check.
The second way is if it fails the above, but passes the dark grey rock check.
Otherwise it exits as whatever stone it was last set to (so mystic first, then purple, then diamond, then regular stone).
This can be understood as (where each check is if they pass the check for meeting the chance):
</p>
<pre>   if (!diamondCheck &amp;&amp; gemCheck){
       return gem
   }
   if (stoneCheck) {
       return grey rock
   }
   if (mysticCheck) {
       return mystic stone
   }
   if (purpleCheck) {
       return gem node
   }
   if (diamondCheck) {
       return diamond
   }
   return rock
</pre>
<p>However the use of diamondCheck twice means you cannot just use the chance for it twice, as it will either pass both times or fail both times, making calculations of chances more complex.
The simplest to understand is the gemstone ore.
In order to return the gemstone ore, the diamond check must fail, and the gem check must pass. This is equivalent to:
</p>
<pre>   (1-chanceForOre)*(1-chanceForDiamond)*chanceForGem.
</pre>
<p>Additionally, this returns a random gem using the function <code>MineShaft::getRandomGemRichStoneForThisLevel</code><sup class="reference" id="cite_ref-whichGem_7-0"><a href="#cite_note-whichGem-7">[7]</a></sup>.
This relies upon the code:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>    <span class="kt">int</span> <span class="n">whichGem</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">mineRandom</span><span class="p">.</span><span class="n">Next</span><span class="p">(</span><span class="m">59</span><span class="p">,</span> <span class="m">70</span><span class="p">);</span>
    <span class="n">whichGem</span> <span class="p">+=</span> <span class="n">whichGem</span> <span class="p">%</span> <span class="m">2</span><span class="p">;</span>
</pre></div>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/File:Skull_Cavern_Gem.png"><img alt="" class="thumbimage" decoding="async" height="196" src="/mediawiki/images/thumb/d/de/Skull_Cavern_Gem.png/300px-Skull_Cavern_Gem.png" srcset="/mediawiki/images/thumb/d/de/Skull_Cavern_Gem.png/450px-Skull_Cavern_Gem.png 1.5x, /mediawiki/images/thumb/d/de/Skull_Cavern_Gem.png/600px-Skull_Cavern_Gem.png 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/File:Skull_Cavern_Gem.png" title="Enlarge"></a></div>Changing distribution of gemstone nodes with floor with neutral base luck, the special charm and level 10 mining.</div></div></div>
<p>Which will randomly select an integer in the range [59,70), and then add 1 if it is odd.
This has the effect of randomly selecting an even integer from 60 to 70 inclusive, with the integers from 60 to 68 inclusive having an equal likelihood and 70 being half as likely.
This is because the mineRandom.Next(a,b) will return an integer greater than or equal to a and less than b, from internally generating a random number from 0 to 1, scaling it and offsetting it to be a random decimal number from 59 to 70, and then rounding down. This means that the range 59 to just below 61 will round to 59 or 60, which is then both forced to 60; while the numbers from 69 to 70 will round to 69 and then be converted to 70, meaning 70 has half the range. This means that the chance for <a href="/Jade" title="Jade">jade</a> (from 70) will be one 11th of the chance to obtain a gem, and the other gems (<a href="/Emerald" title="Emerald">emerald</a>, <a href="/Aquamarine" title="Aquamarine">aquamarine</a>, <a href="/Ruby" title="Ruby">ruby</a>, <a href="/Amethyst" title="Amethyst">amethyst</a>, and <a href="/Topaz" title="Topaz">topaz</a>) will be double that:
</p>
<pre>      jade = (1-chanceForOre)*(1-chanceForDiamond)*chanceForGem/11
     other = (1-chanceForOre)*(1-chanceForDiamond)*chanceForGem*2/11
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/File:Skull_Cavern_GemNodes.png"><img alt="" class="thumbimage" decoding="async" height="196" src="/mediawiki/images/thumb/8/89/Skull_Cavern_GemNodes.png/300px-Skull_Cavern_GemNodes.png" srcset="/mediawiki/images/thumb/8/89/Skull_Cavern_GemNodes.png/450px-Skull_Cavern_GemNodes.png 1.5x, /mediawiki/images/thumb/8/89/Skull_Cavern_GemNodes.png/600px-Skull_Cavern_GemNodes.png 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/File:Skull_Cavern_GemNodes.png" title="Enlarge"></a></div>Changing distribution of gem nodes with floor luck and mining level.</div></div></div>
<p>The chance to not be a gem stone ore, and be some other option (other than diamond) relies upon either passing the diamond check, or failing the diamond check and failing the gemstone check. This chance is equal to:
</p>
<pre>   chanceForDiamond+(1-chanceForDiamond)*(1-chanceForGem) = 1-(1-chanceForDiamond)*chanceForGem
</pre>
<p>Then going through each return statement we have the final chances being:
</p>
<pre>     stone = (1-chanceForOre)*(1-(1-chanceForDiamond)*chanceForGem)*chanceForStone
    mystic = (1-chanceForOre)*(1-(1-chanceForDiamond)*chanceForGem)*(1-chanceForStone)*chanceForMystic
    purple = (1-chanceForOre)*(1-(1-chanceForDiamond)*chanceForGem)*(1-chanceForStone)*(1-chanceForMystic)*chanceForPurple
</pre>
<p>The next one to consider is is Diamond. As passing the diamond check skips the gem stone ore check, so it cannot be included in the chance. To be a diamond, it must pass the diamond check, which skips the gem check, and it must fail every other check. This gives:
</p>
<pre>   diamond = (1-chanceForOre)*(chanceForDiamond)*(1-chanceForPurple)*(1-chanceForMystic)*(1-chanceForStone)
</pre>
<p>While calculated in quite a different way, the chance to find a diamond node is quite comparable to the chance to find a node of another gem type.
And finally, the only other option is a normal rock. This could be calculated as whatever is left over, but for completeness, it must fail every check.
</p>
<pre>      rock = (1-chanceForOre)*(1-chanceForDiamond)*(1-chanceForGem)*(1-chanceForPurple)*(1-chanceForMystic)*(1-chanceForStone)
</pre>
<p>Due to the interaction between the different checks it is hypothetically possible for the chance for one of these to be found increasing to decrease the chance of finding others. This is observed with the increasing chance to find ore reducing the chance to find mystic stones and gem nodes, and after a high enough level, also reducing the chance to find diamonds and gem stones; this also reduces the chance of finding dark grey rocks and rocks. Additionally, the increase in chance of finding these valuable items due to luck or mining level reduces the chance of finding dark grey rocks and rocks, but does not parasitically affect each other, e.g. a higher daily luck will increase your chance of finding diamonds, gems, mystic stones and gem nodes, and will decrease the chance of finding dark grey rocks and normal rocks.
</p>
<h3><span class="mw-headline" id="Ores_From_Rocks">Ores From Rocks</span></h3>
<p>If a normal rock is generated, there is still a chance to obtain ore from it. There are 4 different rocks which can be generated, which have an equal chance. When the rock is broken, the code in <code>StardewValley.Locations.MineShaft::checkStoneForItems</code> will potentially call <code>StardewValley.Locations.MineShaft::getOreIndexForLevel</code> to have ore drop. The key parts of the code are<sup class="reference" id="cite_ref-stoneDrop_8-0"><a href="#cite_note-stoneDrop-8">[8]</a></sup>:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>    <span class="kt">double</span> <span class="n">chanceModifier</span> <span class="p">=</span> <span class="n">who</span><span class="p">.</span><span class="n">DailyLuck</span> <span class="p">/</span> <span class="m">2.0</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">who</span><span class="p">.</span><span class="n">MiningLevel</span> <span class="p">*</span> <span class="m">0.005</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">who</span><span class="p">.</span><span class="n">LuckLevel</span> <span class="p">*</span> <span class="m">0.001</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">oreModifier</span> <span class="p">=</span> <span class="p">((</span><span class="n">tileIndexOfStone</span> <span class="p">==</span> <span class="m">40</span> <span class="p">||</span> <span class="n">tileIndexOfStone</span> <span class="p">==</span> <span class="m">42</span><span class="p">)</span> <span class="p">?</span> <span class="m">1.2</span> <span class="p">:</span> <span class="m">0.8</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.05</span> <span class="p">*</span> <span class="p">(</span><span class="m">1.0</span> <span class="p">+</span> <span class="n">chanceModifier</span><span class="p">)</span> <span class="p">*</span> <span class="n">oreModifier</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.25</span> <span class="p">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)((!</span><span class="n">who</span><span class="p">.</span><span class="n">professions</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="m">21</span><span class="p">))</span> <span class="p">?</span> <span class="m">1</span> <span class="p">:</span> <span class="m">2</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">Game1</span><span class="p">.</span><span class="n">createObjectDebris</span><span class="p">(</span><span class="m">382</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">who</span><span class="p">.</span><span class="n">UniqueMultiplayerID</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span> <span class="c1">//coal</span>
		<span class="p">}</span>
		<span class="n">Game1</span><span class="p">.</span><span class="n">createObjectDebris</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">getOreIndexForLevel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">mineLevel</span><span class="p">,</span> <span class="n">r</span><span class="p">),</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">who</span><span class="p">.</span><span class="n">UniqueMultiplayerID</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span><span class="c1">//ore</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">Game1</span><span class="p">.</span><span class="n">createDebris</span><span class="p">(</span><span class="m">14</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
	<span class="p">}</span>
</pre></div>
<p>This results in a chance to find ore of 5.1% at worst, and 5.7% at best; with a corresponding 47.45% to 47.15% chance to obtain stone. If it would generate ore, then there is a 25% chance to obtain coal, doubled to 50% with the <a href="/Mining#Mining_Skill" title="Mining">Prospector profession</a>. This results in approximately a 1% chance to get coal from a rock.
</p><p>Then inside <code>StardewValley.Locations.MineShaft::getOreIndexForLevel</code>, the following code is run to obtain the ore<sup class="reference" id="cite_ref-oreIndex_9-0"><a href="#cite_note-oreIndex-9">[9]</a></sup>:   
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span>	<span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.01</span> <span class="p">+</span> <span class="p">(</span><span class="kt">double</span><span class="p">)((</span><span class="kt">float</span><span class="p">)(</span><span class="n">mineLevel</span> <span class="p">-</span> <span class="m">120</span><span class="p">)</span> <span class="p">/</span> <span class="m">2000f</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">return</span> <span class="m">386</span><span class="p">;</span> <span class="c1">//Iridium</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(!(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.75</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(!(</span><span class="n">r</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.75</span><span class="p">))</span> <span class="p">{</span>
			<span class="k">return</span> <span class="m">378</span><span class="p">;</span> <span class="c1">//Copper</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="m">380</span><span class="p">;</span> <span class="c1">//Iron</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="m">384</span><span class="p">;</span> <span class="c1">//Gold</span>
</pre></div>
<p>The chance to obtain iridium ore starts at 1.05% at floor 1, and increases linearly to 100% at floor 1980. When combined with the chance to get ore, this starts at an overall chance to get iridum ore from rocks on floor 1 betwen 0.0536% and 0.060%. In the event it is not iridium, then there is a 75% chance for it to be gold, an 18.75% chance for it to be iron, and a 6.25% chance for it to be copper.
</p>
<h3><span class="mw-headline" id="Links_to_Desmos_Graphs">Links to Desmos Graphs</span></h3>
<p>You can access an interactive graph on Desmos via the links below, with the links having a some options preselected.
</p>
<table class="wikitable">
<tbody><tr>
<th>Desmos Link</th>
<th>Description
</th></tr>
<tr>
<td><a class="external free" href="https://www.desmos.com/calculator/uwi9hfdjvv" rel="nofollow">https://www.desmos.com/calculator/uwi9hfdjvv</a></td>
<td>Metal ores vs floor
</td></tr>
<tr>
<td><a class="external free" href="https://www.desmos.com/calculator/iopaqgwsvs" rel="nofollow">https://www.desmos.com/calculator/iopaqgwsvs</a></td>
<td>Gemstones, gem nodes, dark grey rocks (stone ore) and mystic stones vs floor.<br/><i>Note that some values have been scaled to keep it on the same graph.</i>
</td></tr>
<tr>
<td><a class="external free" href="https://www.desmos.com/calculator/ngyjsb1b0m" rel="nofollow">https://www.desmos.com/calculator/ngyjsb1b0m</a></td>
<td>The effect of daily luck (including special charm) on the chance normalised to their reference value
</td></tr>
<tr>
<td><a class="external free" href="https://www.desmos.com/calculator/72efyqudvu" rel="nofollow">https://www.desmos.com/calculator/72efyqudvu</a></td>
<td>The effect of mining level (including buffs) on the chance, normalised to their reference value
</td></tr></tbody></table>
<p>When not being used as the x axis, the values of daily luck, mining level and floor are controlled by a variable in the left pane and are used to calculate a reference. Initially these are set to floor 100, a daily luck of 0.025 (average daily luck with special charm) and a mining level of 10.
</p>
<h2><span class="mw-headline" id="History">History</span></h2>
<ul><li><a href="/Version_History#1.6" title="Version History">1.6</a>: chooseStoneType renamed to createLitterObject. Additional difficulty can now be 2. <a href="/Calico_Statue" title="Calico Statue">Calico statues</a> introduced.</li></ul>
<h2><span class="mw-headline" id="References">References</span></h2>
<div class="mw-references-wrap"><ol class="references">
<li id="cite_note-populateLevel-1"><span class="mw-cite-backlink"><a href="#cite_ref-populateLevel_1-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::populateLevel</samp> in the game code.</span>
</li>
<li id="cite_note-createLitterObject-2"><span class="mw-cite-backlink"><a href="#cite_ref-createLitterObject_2-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::createLitterObject</samp> in the game code.</span>
</li>
<li id="cite_note-adjustChances-3"><span class="mw-cite-backlink"><a href="#cite_ref-adjustChances_3-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::adjustLevelChances</samp> in the game code.</span>
</li>
<li id="cite_note-oreClumps-4"><span class="mw-cite-backlink"><a href="#cite_ref-oreClumps_4-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::tryToAddOreClumps</samp> in the game code.</span>
</li>
<li id="cite_note-dailyLuck-5"><span class="mw-cite-backlink"><a href="#cite_ref-dailyLuck_5-0">↑</a></span> <span class="reference-text">See <samp>FarmerTeam::AverageDailyLuck</samp> and <samp>Game1::_newDayAfterFade</samp> in the game code.</span>
</li>
<li id="cite_note-whichOre-6"><span class="mw-cite-backlink"><a href="#cite_ref-whichOre_6-0">↑</a></span> <span class="reference-text">See <samp>FarmerTeam::getAppropriateOre</samp> in the game code.</span>
</li>
<li id="cite_note-whichGem-7"><span class="mw-cite-backlink"><a href="#cite_ref-whichGem_7-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::getRandomGemRichStoneForThisLevel</samp> in the game code.</span>
</li>
<li id="cite_note-stoneDrop-8"><span class="mw-cite-backlink"><a href="#cite_ref-stoneDrop_8-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::checkStoneForItems</samp> in the game code.</span>
</li>
<li id="cite_note-oreIndex-9"><span class="mw-cite-backlink"><a href="#cite_ref-oreIndex_9-0">↑</a></span> <span class="reference-text">See <samp>MineShaft::getOreIndexForLevel</samp> in the game code.</span>
</li>
</ol></div>
<!-- 
NewPP limit report
Cached time: 20250303142331
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.084 seconds
Real time usage: 0.481 seconds
Preprocessor visited node count: 275/1000000
Post‐expand include size: 224/2097152 bytes
Template argument size: 148/2097152 bytes
Highest expansion depth: 8/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 27243/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.281      1 -total
100.00%    4.281      1 Template:History
 52.16%    2.233      1 Template:Version
-->
<!-- Saved in parser cache with key enwiki:pcache:idhash:14268-0!canonical and timestamp 20250303142331 and revision id 183287
 -->
</div></div><div class="printfooter">Retrieved from "<a dir="ltr" href="https://stardewvalleywiki.com/mediawiki/index.php?title=Skull_Cavern/Ore_Distribution&amp;oldid=183287">https://stardewvalleywiki.com/mediawiki/index.php?title=Skull_Cavern/Ore_Distribution&amp;oldid=183287</a>"</div>
<div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/Category:Game_mechanics" title="Category:Game mechanics">Game mechanics</a></li></ul></div></div>
</div>